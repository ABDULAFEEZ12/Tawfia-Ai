<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Tawfiq AI - Smart Islamic Companion</title>
    <style>
        /* Your same styles remain unchanged */
        /* (I kept this part the same as your original for brevity) */
        /* ... [Keep your full style section here] ... */
    </style>
</head>
<body class="light-mode">

<button class="toggle-btn" onclick="toggleMode()">Toggle Light/Dark Mode</button>

<header>
    <h1>ðŸŒ™ Tawfiq AI - Smart Islamic Companion ðŸŒ™</h1>
    <h3>âœ¨ Ask me anything about Islam âœ¨</h3>
</header>

<div class="tabs">
    <div class="tab active" onclick="switchTab('aiSection', event)">ðŸ¤– AI</div>
    <div class="tab" onclick="switchTab('quranSection', event)">ðŸ“– Quran</div>
    <div class="tab" onclick="switchTab('hadithSection', event)">ðŸ“œ Hadith</div>
</div>

<!-- AI Section -->
<div class="section active" id="aiSection">
    <input type="text" id="userInput" placeholder="Type your question here...">
    <button onclick="sendQuestion()">Ask</button>
    <div class="messages" id="messages"></div>
</div>

<!-- Quran Section -->
<div class="section" id="quranSection">
    <select id="surahList" onchange="loadSurahAyahs()">
        <option value="">-- Select Surah --</option>
    </select>
    <div class="results" id="quranResult"></div>
</div>

<!-- Hadith Section -->
<div class="section" id="hadithSection">
    <input type="text" id="hadithInput" placeholder="Enter Hadith keyword or number...">
    <button onclick="searchHadith()">Search Hadith</button>
    <div class="results" id="hadithResult"></div>
</div>

<script>
function switchTab(sectionId, event) {
    document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
    document.getElementById(sectionId).classList.add('active');
    event.target.classList.add('active');
}

function toggleMode() {
    document.body.classList.toggle('light-mode');
    document.body.classList.toggle('dark-mode');
}

function sendQuestion() {
    const input = document.getElementById("userInput").value.trim();
    if (!input) return;
    const messagesDiv = document.getElementById("messages");
    const userMsg = document.createElement("p");
    userMsg.classList.add("user-message");
    userMsg.textContent = "You: " + input;
    messagesDiv.appendChild(userMsg);
    document.getElementById("userInput").value = "";
    fetch('/ask', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ question: input })
    }).then(res => res.json()).then(data => {
        const aiMsg = document.createElement("p");
        aiMsg.textContent = "Tawfiq AI: " + (data.answer || "Sorry, couldn't answer.");
        messagesDiv.appendChild(aiMsg);
        messagesDiv.scrollTop = messagesDiv.scrollHeight;
    });
}

// Load Surahs (1-114)
document.addEventListener("DOMContentLoaded", () => {
    const surahList = document.getElementById("surahList");
    const surahNames = [
        "Al-Fatihah","Al-Baqarah","Aal-E-Imran","An-Nisa","Al-Ma'idah","Al-An'am","Al-A'raf","Al-Anfal","At-Tawbah",
        "Yunus","Hud","Yusuf","Ar-Ra'd","Ibrahim","Al-Hijr","An-Nahl","Al-Isra","Al-Kahf","Maryam","Ta-Ha",
        "Al-Anbiya","Al-Hajj","Al-Mu'minun","An-Nur","Al-Furqan","Ash-Shu'ara","An-Naml","Al-Qasas","Al-Ankabut","Ar-Rum",
        "Luqman","As-Sajda","Al-Ahzab","Saba","Fatir","Ya-Sin","As-Saffat","Sad","Az-Zumar","Ghafir",
        "Fussilat","Ash-Shura","Az-Zukhruf","Ad-Dukhan","Al-Jathiya","Al-Ahqaf","Muhammad","Al-Fath","Al-Hujurat","Qaf",
        "Adh-Dhariyat","At-Tur","An-Najm","Al-Qamar","Ar-Rahman","Al-Waqia","Al-Hadid","Al-Mujadila","Al-Hashr","Al-Mumtahina",
        "As-Saff","Al-Jumua","Al-Munafiqun","At-Taghabun","At-Talaq","At-Tahrim","Al-Mulk","Al-Qalam","Al-Haqqa","Al-Maarij",
        "Nuh","Al-Jinn","Al-Muzzammil","Al-Muddaththir","Al-Qiyama","Al-Insan","Al-Mursalat","An-Naba","An-Nazi'at","Abasa",
        "At-Takwir","Al-Infitar","Al-Mutaffifin","Al-Inshiqaq","Al-Burooj","At-Tariq","Al-Ala","Al-Ghashiya","Al-Fajr","Al-Balad",
        "Ash-Shams","Al-Lail","Ad-Duhaa","Ash-Sharh","At-Tin","Al-Alaq","Al-Qadr","Al-Bayyina","Az-Zalzala","Al-Adiyat",
        "Al-Qaria","At-Takathur","Al-Asr","Al-Humaza","Al-Fil","Quraish","Al-Ma'un","Al-Kawthar","Al-Kafiroon","An-Nasr",
        "Al-Masad","Al-Ikhlas","Al-Falaq","An-Nas"
    ];
    surahNames.forEach((name, index) => {
        const option = document.createElement("option");
        option.value = (index + 1).toString();  // Surah number
        option.textContent = `${index + 1}. ${name}`;
        surahList.appendChild(option);
    });
});

function loadSurahAyahs() {
    const surahNumber = document.getElementById("surahList").value;
    if (!surahNumber) return;
    const resultDiv = document.getElementById("quranResult");
    resultDiv.innerHTML = `<div class="user-message">Loading Surah ${surahNumber}...</div>`;
    fetch('/get-surah', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ surah: surahNumber })
    }).then(res => res.json()).then(data => {
        if (data.result) {
            resultDiv.innerHTML = `<div>${data.result}</div>`;
        } else {
            resultDiv.innerHTML = `<div>No data found for Surah ${surahNumber}.</div>`;
        }
    });
}

function searchHadith() {
    const query = document.getElementById("hadithInput").value.trim();
    if (!query) return;
    const resultDiv = document.getElementById("hadithResult");
    resultDiv.innerHTML = `<div class="user-message">Searching Hadith: ${query}</div>`;
    fetch('/hadith-search', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ query })
    }).then(res => res.json()).then(data => {
        resultDiv.innerHTML += `<div>${data.result || "No result found."}</div>`;
    });
}
</script>

</body>
</html>
